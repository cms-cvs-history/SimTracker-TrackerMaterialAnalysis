process Geometry = 
{
    service = MessageLogger
    {
        untracked vstring destinations = {"cout"}
        untracked vstring categories = { "FwkJob" } 
        untracked PSet cout =
        {
            untracked PSet default = { untracked int32 limit = 0 }
            untracked PSet FwkJob  = { untracked int32 limit = -1 } # but FwkJob category - those unlimitted
        }
    }
    
    untracked PSet maxEvents = { untracked int32 input = 10 }
   
    # Read MV events from a HepMC ASCII file
    source = MCFileSource
    {
        # from http://cmsdoc.cern.ch/cms/data/CMSSW/Validation/Geometry/data/single_neutrino.random.dat
        untracked vstring fileNames = { "file:single_neutrino.random.dat" }
    }           

    # Random number generator service for these modules
    include "SimTracker/TrackerMaterialAnalysis/data/randomNumberGeneratorService.cfi"
    
    # Gaussian Vertex Smearing
    include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"

    # Detector simulation (Geant4-based) with tracking material accounting 
    include "SimTracker/TrackerMaterialAnalysis/data/trackingMaterialProducer.cff"

    module out = PoolOutputModule {
        untracked string fileName = "file:material.root"
        untracked vstring outputCommands = {
            # drop all objects...
            "drop *",
            # ...but the material accounting informations
            "keep MaterialAccountingTracks_trackingMaterialProducer_*_*"
        }
    }
        
    path p = { VtxSmeared, trackingMaterialProducer }
    endpath outpath = { out }
}
