process Geometry = 
{
    service = MessageLogger
    {
        untracked vstring destinations = {"cout"}
        untracked vstring categories = { "FwkJob" } 
        untracked PSet cout =
        {
            untracked PSet default = { untracked int32 limit = 0 }
            untracked PSet FwkJob  = { untracked int32 limit = -1 } # but FwkJob category - those unlimitted
        }
    }
    
    # Read MV events from a HepMC ASCII file
    source = MCFileSource
    {
        # from http://cmsdoc.cern.ch/cms/data/CMSSW/Validation/Geometry/data/single_neutrino.random.dat
        untracked vstring fileNames = { "file:single_neutrino.random.dat" }
    }           
    untracked PSet maxEvents = { untracked int32 input = 1000 }

    # Generate events at runtime (what seed is use ?)
    #source = FlatRandomPtGunSource 
    #{ 
    #  untracked PSet PGunParameters =
    #  {
    #    # you can request more than 1 particle
    #    untracked vint32  PartID = { 12 }      # nu_e
    #    untracked double MinEta = -2.5
    #    untracked double MaxEta =  2.5
    #    #untracked double MinPhi = -3.14159265358979323846     # default to -Pi
    #    #untracked double MaxPhi =  3.14159265358979323846     # default to  Pi
    #    untracked double MinPt  =  9.99
    #    untracked double MaxPt  = 10.01
    #  }
    #}
  
    # Gaussian Vertex Smearing
    include "Configuration/StandardSequences/data/VtxSmearedGauss.cff"
        
    # Detector simulation (Geant4-based) with tracking material accounting 
    include "SimTracker/TrackerMaterialAnalysis/data/trackingMaterialProducer.cff"

    module out = PoolOutputModule {
        untracked string fileName = "file:material.root"
        untracked vstring outputCommands = {
            # drop all objects...
            "drop *",
            # ...but the material accounting informations
            "keep MaterialAccountingTracks_trackingMaterialProducer_*_*"
        }
    }
        
    path p = { VtxSmeared, trackingMaterialProducer }
    endpath outpath = { out }
}
